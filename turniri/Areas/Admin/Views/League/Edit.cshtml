@model turniri.Models.ViewModels.LeagueView
@{
    ViewBag.Title = Model.ID == 0 ? "Добавить лигу" : "Изменить лигу";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

@section header
{
    <script type="text/javascript" src="/Media/scripts/admin/edit-league.js"></script>
}

<h2>@(Model.ID == 0 ? "Добавить лигу" : "Изменить лигу")</h2>
<p></p>
@using (Html.BeginForm("Edit", "League", FormMethod.Post, new { @class = "form-horizontal" }))
{
    @Html.Hidden("ID", Model.ID)
    @Html.Hidden("Image", Model.Image)
    @Html.Hidden("CanChangeTournamentData", Model.CanChangeTournamentData)
    <fieldset>
        <div class="control-group">
            <label class="control-label" for="GameID">
                Игра
            </label>
            <div class="controls">
                @Html.DropDownList("GameID", Model.SelectListGameID)
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="Name">
                Наименование
            </label>
            <div class="controls">
                @Html.TextBox("Name", Model.Name)
                @Html.ValidationMessage("Name")
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">
                Url
            </label>
            <div class="controls">
                @Html.TextBox("Url", Model.Url)
                @Html.ValidationMessage("Url")
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">
                Изображение
                @Html.ValidationMessage("Image")
            </label>
            <div class="controls">
                <img src="@Model.FullImage?width=105&height=105&mode=crop" alt="avatar" id="PreviewImage" />
                <br />
                <div class="btn btn-danger" id="DeletePreview">
                    удалить
                </div>
                <div class="btn" id="ChangePreview">
                    загрузить изображение
                </div>
            </div>
        </div>

        <h4>Турнирная информация</h4>
        @if (Model.CanChangeTournamentData) {
            
        <div class="control-group">
            <label class="control-label" for="Name">
                Одиночная или командная
            </label>
            <div class="controls">
                @Html.DropDownList("IsGroup", Model.SelectListIsGroup)
                <div class="hint no-absolute">
                        Турнир лиги может быть двух видов по <strong>типу участия</strong>:
                        <ol>
                            <li><strong>Одиночный</strong> &mdash; регистрируется один учасник.</li>
                            <li><strong>Командный</strong> &mdash; капитаны групп регистрируют команды и составляют ростер. </li>
                        </ol>
                    </div>
            </div>
        </div>
        <div class="control-group" id="TeamCountWrapper">
            <label class="control-label" for="TeamCount">Количество игроков</label>
            <div class="controls">
                @Html.TextBox("TeamCount", Model.TeamCount)
                @Html.ValidationMessage("TeamCount")
                <div class="hint">
                    <strong>Количество игроков</strong> в командном ростере (не считая замен)
                </div>
            </div>
        </div>
        <div class="control-group" id="HotReplacementWrapper">
            <label class="control-label" for="HotReplacement">Количество замен</label>
            <div class="controls">

                @Html.TextBox("HotReplacement", Model.HotReplacement)
                @Html.ValidationMessage("HotReplacement")
                <div class="hint no-absolute">
                    <strong>Количество замен</strong> в течении всего турнира.
                        Если кол-во замен <em>неограниченно</em>, оставьте поле пустым, если замены
                    <em>запрещены</em>
                    поставьте 0
                </div>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="Name">
                Количество игр
            </label>
            <div class="controls">
                @Html.DropDownList("CountRound", Model.CountRoundSelectList)
                <div class="hint no-absolute">
                    Задайте количество раундов в матче: <strong>одна или
                    до двух побед</strong>.
                    Финальные игры в сетке плей-офф проводятся в один раунт (как в лиге чемпионов УЕФА)
                </div>
            </div>
        </div>
        <div class="control-group" id="HostGuestWrapper">
            <label class="control-label" for="HostGuest">
                Игры дома/в гостях
            </label>
            <div class="controls">
                @Html.CheckBox("HostGuest", Model.HostGuest)
                <div class="hint">
                    Проводятся ли игры дома/в гостях. <strong>Важно для футбольных игр.</strong>
                </div>
            </div>
        </div>
        <div class="control-group" id="DoubleGoalInGuestWrapper">
            <label class="control-label" for="DoubleGoalInGuest">
                Преимущество гола в гостях
            </label>
            <div class="controls">
                @Html.CheckBox("DoubleGoalInGuest", Model.DoubleGoalInGuest)
                <div class="hint">
                    Есть ли преимущество гола в гостях. <strong>Важно для футбольных
                    игр.</strong>
                </div>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">
                Очки за выигрыш матча в турнире
            </label>
            <div class="controls">
                @Html.TextBox("SingleWinPoint", Model.SingleWinPoint)
                @Html.ValidationMessage("SingleWinPoint")
                <div class="hint">
                    Сколько <strong>рейтинговых очков</strong> будет начислено за выигрыш
                    (не технический) одного матча (не раунда) в данном турнире.
                </div>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">
                Очки за ничью матча в турнире
            </label>
            <div class="controls">
                @Html.TextBox("SingleDrawPoint", Model.SingleDrawPoint)
                @Html.ValidationMessage("SingleDrawPoint")
                <div class="hint">
                    Сколько <strong>рейтинговых очков</strong> будет начислено за ничью
                    одного матча (не раунда) в данном турнире.
                </div>
            </div>
        </div>
            
        }
        <div class="control-group">
            <label class="control-label">
                Правила турнира
            </label>
            <div class="controls">
                @Html.TextArea("Rules", Model.Rules, new { @class = "input-xlarge html-description" })
                @Html.ValidationMessage("Rules")
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">
                Дополнительная информация
            </label>
            <div class="controls">
                @Html.TextArea("Description", Model.Description, new { @class = "input-xlarge html-description" })
                @Html.ValidationMessage("Description")
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">
                Сохранить
            </button>
            @Html.ActionLink("Отмена", "Index", null, null, new { @class = "btn" })
        </div>
    </fieldset>
}
